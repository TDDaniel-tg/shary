(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1994],{2194:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var s=a(5155),r=a(2115),i=a(5695),l=a(6874),c=a.n(l),d=a(7550),n=a(4616),x=a(7924),m=a(2657);let h=(0,a(9946).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var o=a(2525),p=a(6766);function u(){let[e,t]=(0,r.useState)([]),[a,l]=(0,r.useState)(!0),[u,g]=(0,r.useState)(""),[y,f]=(0,r.useState)(null),j=(0,i.useRouter)(),v=[{id:1,name:'Воздушные шары латексные "Радуга"',price:250,image_url:"/images/products/balloon.png",stock_quantity:150,is_featured:!0,is_active:!0,created_at:"2024-01-15"},{id:2,name:'Фольгированные шары "Звезда"',price:450,image_url:"/images/products/balloon.png",stock_quantity:85,is_featured:!1,is_active:!0,created_at:"2024-01-14"},{id:3,name:"Шары для моделирования ШДМ",price:199,image_url:"/images/products/balloon.png",stock_quantity:0,is_featured:!1,is_active:!1,created_at:"2024-01-13"}];(0,r.useEffect)(()=>{N()},[]);let N=async()=>{l(!0);try{let e=localStorage.getItem("admin-token");if(!e)return void j.push("/admin/login");let a=await fetch("/api/admin/products",{headers:{Authorization:"Bearer ".concat(e)}});if(a.ok){let e=await a.json();t(e.data||[])}else t(v)}catch(e){t(v)}finally{l(!1)}},w=async e=>{if(confirm("Вы уверены, что хотите удалить этот товар?")){f(e);try{let t=localStorage.getItem("admin-token");(await fetch("/api/admin/products/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}})).ok?(alert("Товар успешно удален!"),N()):alert("Ошибка при удалении товара")}catch(e){alert("Произошла ошибка при удалении товара")}finally{f(null)}}},b=e.filter(e=>e.name.toLowerCase().includes(u.toLowerCase())),k=e=>new Date(e).toLocaleDateString("ru-RU");return a?(0,s.jsx)("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-pink-500"})}):(0,s.jsx)("div",{className:"min-h-screen bg-gray-100",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)(c(),{href:"/admin_dashboard",className:"inline-flex items-center text-gray-600 hover:text-gray-900 mb-4",children:[(0,s.jsx)(d.A,{className:"h-5 w-5 mr-2"}),"Назад к панели управления"]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Управление товарами"}),(0,s.jsxs)(c(),{href:"/admin_dashboard/products/add",className:"bg-pink-500 text-white px-4 py-2 rounded-lg hover:bg-pink-600 transition-colors flex items-center gap-2",children:[(0,s.jsx)(n.A,{className:"h-5 w-5"}),"Добавить товар"]})]})]}),(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsxs)("div",{className:"relative max-w-md",children:[(0,s.jsx)(x.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,s.jsx)("input",{type:"text",placeholder:"Поиск товаров...",value:u,onChange:e=>g(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-pink-500"})]})}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Товар"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Цена"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Склад"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Статус"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Дата создания"}),(0,s.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Действия"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===b.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500",children:u?"Товары не найдены":"Нет товаров для отображения"})}):b.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"flex-shrink-0 h-16 w-16",children:(0,s.jsx)(p.default,{src:e.image_url||"/images/products/balloon.png",alt:e.name,width:64,height:64,className:"rounded-lg object-cover"})}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900 max-w-xs truncate",children:e.name}),e.is_featured&&(0,s.jsx)("div",{className:"text-xs text-pink-600 bg-pink-100 px-2 py-1 rounded mt-1 inline-block",children:"Рекомендуемый"})]})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.price," ₽"]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"text-sm ".concat(e.stock_quantity>0?"text-green-600":"text-red-600"),children:[e.stock_quantity," шт."]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.is_active?"Активен":"Неактивен"})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:k(e.created_at)}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,s.jsx)(c(),{href:"/products/".concat(e.id),className:"text-blue-600 hover:text-blue-900 p-1",title:"Просмотреть",children:(0,s.jsx)(m.A,{className:"h-4 w-4"})}),(0,s.jsx)(c(),{href:"/admin_dashboard/products/edit/".concat(e.id),className:"text-green-600 hover:text-green-900 p-1",title:"Редактировать",children:(0,s.jsx)(h,{className:"h-4 w-4"})}),(0,s.jsx)("button",{onClick:()=>w(e.id),disabled:y===e.id,className:"text-red-600 hover:text-red-900 p-1 disabled:opacity-50",title:"Удалить",children:(0,s.jsx)(o.A,{className:"h-4 w-4"})})]})})]},e.id))})]})})}),(0,s.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Всего товаров"}),(0,s.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:e.length})]}),(0,s.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Активных товаров"}),(0,s.jsx)("div",{className:"text-2xl font-bold text-green-600",children:e.filter(e=>e.is_active).length})]}),(0,s.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Заканчивающихся товаров"}),(0,s.jsx)("div",{className:"text-2xl font-bold text-red-600",children:e.filter(e=>e.stock_quantity<10).length})]})]})]})})}},2525:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},2657:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},4616:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5695:(e,t,a)=>{"use strict";var s=a(8999);a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},7550:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},7924:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},8043:(e,t,a)=>{Promise.resolve().then(a.bind(a,2194))}},e=>{var t=t=>e(e.s=t);e.O(0,[95,6766,8441,1684,7358],()=>t(8043)),_N_E=e.O()}]);