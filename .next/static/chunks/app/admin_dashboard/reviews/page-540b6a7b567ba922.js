(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6891],{1817:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>h});var t=a(5155),r=a(2115),l=a(5695),d=a(6874),i=a.n(d),c=a(8564),n=a(7550),m=a(4186);let x=(0,a(9946).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var o=a(4416);function h(){let[e,s]=(0,r.useState)([]),[a,d]=(0,r.useState)(!0),[h,g]=(0,r.useState)(null),u=(0,l.useRouter)(),p=[{id:1,user_name:"Анна Петрова",product_name:'Воздушные шары латексные "Радуга"',rating:5,comment:"Отличные шары! Качество превосходное, дети были в восторге. Обязательно закажем еще!",created_at:"2024-01-20T10:30:00Z",is_moderated:!1},{id:2,user_name:"Михаил Иванов",product_name:'Фольгированные шары "Звезда"',rating:4,comment:"Хорошие шары, быстрая доставка. Один шар немного помялся, но в целом доволен покупкой.",created_at:"2024-01-19T15:45:00Z",is_moderated:!1},{id:3,user_name:"Елена Смирнова",product_name:"Шары для моделирования ШДМ",rating:5,comment:"Заказывала для детского дня рождения - все прошло идеально! Шары хорошо держат форму.",created_at:"2024-01-18T09:15:00Z",is_moderated:!1}];(0,r.useEffect)(()=>{j()},[]);let j=async()=>{d(!0);try{let e=localStorage.getItem("admin-token");if(!e)return void u.push("/admin/login");let a=await fetch("/api/admin/reviews/pending",{headers:{Authorization:"Bearer ".concat(e)}});if(a.ok){let e=await a.json();s(e.data||[])}else s(p)}catch(e){s(p)}finally{d(!1)}},y=async(e,a)=>{g(e);try{let t=localStorage.getItem("admin-token");(await fetch("/api/admin/reviews/".concat(e,"/").concat(a),{method:"POST",headers:{Authorization:"Bearer ".concat(t)}})).ok?(alert("approve"===a?"Отзыв одобрен!":"Отзыв отклонен!"),s(s=>s.filter(s=>s.id!==e))):alert("Ошибка при обработке отзыва")}catch(e){alert("Произошла ошибка при обработке отзыва")}finally{g(null)}},N=e=>(0,t.jsx)("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(s=>(0,t.jsx)(c.A,{className:"h-4 w-4 ".concat(s<=e?"text-yellow-400 fill-current":"text-gray-300")},s))}),b=e=>new Date(e).toLocaleString("ru-RU");return a?(0,t.jsx)("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-pink-500"})}):(0,t.jsx)("div",{className:"min-h-screen bg-gray-100",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)(i(),{href:"/admin_dashboard",className:"inline-flex items-center text-gray-600 hover:text-gray-900 mb-4",children:[(0,t.jsx)(n.A,{className:"h-5 w-5 mr-2"}),"Назад к панели управления"]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Модерация отзывов"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,t.jsx)(m.A,{className:"h-4 w-4"}),(0,t.jsxs)("span",{children:[e.length," отзывов ожидают модерации"]})]})]})]}),0===e.length?(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[(0,t.jsx)("div",{className:"text-gray-400 mb-4",children:(0,t.jsx)(x,{className:"h-16 w-16 mx-auto"})}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Все отзывы обработаны!"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Нет отзывов, ожидающих модерации"})]}):(0,t.jsx)("div",{className:"space-y-6",children:e.map(e=>(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900",children:e.user_name}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:e.product_name}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:b(e.created_at)})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[N(e.rating),(0,t.jsxs)("span",{className:"text-sm text-gray-600",children:["(",e.rating,"/5)"]})]})]}),(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsx)("p",{className:"text-gray-700 leading-relaxed",children:e.comment})}),(0,t.jsxs)("div",{className:"flex items-center gap-4 pt-4 border-t border-gray-200",children:[(0,t.jsxs)("button",{onClick:()=>y(e.id,"approve"),disabled:h===e.id,className:"bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors flex items-center gap-2 disabled:opacity-50",children:[(0,t.jsx)(x,{className:"h-4 w-4"}),"Одобрить"]}),(0,t.jsxs)("button",{onClick:()=>y(e.id,"reject"),disabled:h===e.id,className:"bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors flex items-center gap-2 disabled:opacity-50",children:[(0,t.jsx)(o.A,{className:"h-4 w-4"}),"Отклонить"]}),h===e.id&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,t.jsx)("div",{className:"animate-spin h-4 w-4 border-2 border-gray-300 border-t-gray-600 rounded-full"}),(0,t.jsx)("span",{className:"text-sm",children:"Обработка..."})]})]})]},e.id))}),(0,t.jsxs)("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Ожидают модерации"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:e.length})]}),(0,t.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Одобрено сегодня"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-green-600",children:"12"})]}),(0,t.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Отклонено сегодня"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-red-600",children:"3"})]})]})]})})}},3674:(e,s,a)=>{Promise.resolve().then(a.bind(a,1817))},4186:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},4416:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},5695:(e,s,a)=>{"use strict";var t=a(8999);a.o(t,"usePathname")&&a.d(s,{usePathname:function(){return t.usePathname}}),a.o(t,"useRouter")&&a.d(s,{useRouter:function(){return t.useRouter}}),a.o(t,"useSearchParams")&&a.d(s,{useSearchParams:function(){return t.useSearchParams}})},7550:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},8564:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[95,8441,1684,7358],()=>s(3674)),_N_E=e.O()}]);