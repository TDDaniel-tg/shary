(()=>{var e={};e.id=4131,e.ids=[4131],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},13365:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>f,routeModule:()=>l,serverHooks:()=>v,workAsyncStorage:()=>x,workUnitAsyncStorage:()=>y});var s={};r.r(s),r.d(s,{POST:()=>m});var n=r(96559),o=r(48088),a=r(37719),i=r(32190);let u=process.env.YOOKASSA_SHOP_ID,c=process.env.YOOKASSA_SECRET_KEY,p=process.env.YOOKASSA_RETURN_URL,d=null;if(u&&c)try{let{YooKassa:e}=r(Object(function(){var e=Error("Cannot find module 'yookassa'");throw e.code="MODULE_NOT_FOUND",e}()));d=new e({shopId:u,secretKey:c})}catch(e){}async function m(e){try{if(!d)return i.NextResponse.json({success:!1,error:"Payment system not configured"},{status:503});let{orderId:t,amount:r,email:s}=await e.json();if(!t||!r||!s)return i.NextResponse.json({success:!1,error:"orderId, amount, email required"},{status:400});let n=await d.createPayment({amount:{value:r.toFixed(2),currency:"RUB"},confirmation:{type:"redirect",return_url:p},capture:!0,description:`Оплата заказа ${t}`,metadata:{orderId:t},receipt:{customer:{email:s},items:[{description:`Заказ ${t}`,quantity:1,amount:{value:r.toFixed(2),currency:"RUB"},vat_code:1}]}});return i.NextResponse.json({success:!0,payment_url:n.confirmation.confirmation_url})}catch(e){return i.NextResponse.json({success:!1,error:"Failed to create payment"},{status:500})}}let l=new n.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/payments/route",pathname:"/api/payments",filename:"route",bundlePath:"app/api/payments/route"},resolvedPagePath:"C:\\Users\\HP\\Desktop\\work\\project\\app\\api\\payments\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:x,workUnitAsyncStorage:y,serverHooks:v}=l;function f(){return(0,a.patchFetch)({workAsyncStorage:x,workUnitAsyncStorage:y})}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},96487:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[7719,580],()=>r(13365));module.exports=s})();