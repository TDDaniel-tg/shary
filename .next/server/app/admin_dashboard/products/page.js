(()=>{var e={};e.id=1994,e.ids=[1994],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},16189:(e,t,s)=>{"use strict";var a=s(65773);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},16909:(e,t,s)=>{Promise.resolve().then(s.bind(s,49049))},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},28559:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},49049:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\HP\\\\Desktop\\\\work\\\\project\\\\app\\\\admin_dashboard\\\\products\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\HP\\Desktop\\work\\project\\app\\admin_dashboard\\products\\page.tsx","default")},54771:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var a=s(60687),r=s(43210),i=s(16189),d=s(85814),n=s.n(d),l=s(28559),o=s(96474),c=s(99270),x=s(13861);let p=(0,s(62688).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var m=s(88233),h=s(30474);function u(){let[e,t]=(0,r.useState)([]),[s,d]=(0,r.useState)(!0),[u,g]=(0,r.useState)(""),[f,y]=(0,r.useState)(null),v=(0,i.useRouter)(),j=[{id:1,name:'Воздушные шары латексные "Радуга"',price:250,image_url:"/images/products/balloon.png",stock_quantity:150,is_featured:!0,is_active:!0,created_at:"2024-01-15"},{id:2,name:'Фольгированные шары "Звезда"',price:450,image_url:"/images/products/balloon.png",stock_quantity:85,is_featured:!1,is_active:!0,created_at:"2024-01-14"},{id:3,name:"Шары для моделирования ШДМ",price:199,image_url:"/images/products/balloon.png",stock_quantity:0,is_featured:!1,is_active:!1,created_at:"2024-01-13"}],b=async()=>{d(!0);try{let e=localStorage.getItem("admin-token");if(!e)return void v.push("/admin/login");let s=await fetch("/api/admin/products",{headers:{Authorization:`Bearer ${e}`}});if(s.ok){let e=await s.json();t(e.data||[])}else t(j)}catch(e){t(j)}finally{d(!1)}},w=async e=>{if(confirm("Вы уверены, что хотите удалить этот товар?")){y(e);try{let t=localStorage.getItem("admin-token");(await fetch(`/api/admin/products/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}})).ok?(alert("Товар успешно удален!"),b()):alert("Ошибка при удалении товара")}catch(e){alert("Произошла ошибка при удалении товара")}finally{y(null)}}},N=e.filter(e=>e.name.toLowerCase().includes(u.toLowerCase())),k=e=>new Date(e).toLocaleDateString("ru-RU");return s?(0,a.jsx)("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-pink-500"})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-100",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)(n(),{href:"/admin_dashboard",className:"inline-flex items-center text-gray-600 hover:text-gray-900 mb-4",children:[(0,a.jsx)(l.A,{className:"h-5 w-5 mr-2"}),"Назад к панели управления"]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Управление товарами"}),(0,a.jsxs)(n(),{href:"/admin_dashboard/products/add",className:"bg-pink-500 text-white px-4 py-2 rounded-lg hover:bg-pink-600 transition-colors flex items-center gap-2",children:[(0,a.jsx)(o.A,{className:"h-5 w-5"}),"Добавить товар"]})]})]}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"relative max-w-md",children:[(0,a.jsx)(c.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Поиск товаров...",value:u,onChange:e=>g(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-pink-500"})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Товар"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Цена"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Склад"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Статус"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Дата создания"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Действия"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===N.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500",children:u?"Товары не найдены":"Нет товаров для отображения"})}):N.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0 h-16 w-16",children:(0,a.jsx)(h.default,{src:e.image_url||"/images/products/balloon.png",alt:e.name,width:64,height:64,className:"rounded-lg object-cover"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900 max-w-xs truncate",children:e.name}),e.is_featured&&(0,a.jsx)("div",{className:"text-xs text-pink-600 bg-pink-100 px-2 py-1 rounded mt-1 inline-block",children:"Рекомендуемый"})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.price," ₽"]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:`text-sm ${e.stock_quantity>0?"text-green-600":"text-red-600"}`,children:[e.stock_quantity," шт."]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e.is_active?"Активен":"Неактивен"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:k(e.created_at)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,a.jsx)(n(),{href:`/products/${e.id}`,className:"text-blue-600 hover:text-blue-900 p-1",title:"Просмотреть",children:(0,a.jsx)(x.A,{className:"h-4 w-4"})}),(0,a.jsx)(n(),{href:`/admin_dashboard/products/edit/${e.id}`,className:"text-green-600 hover:text-green-900 p-1",title:"Редактировать",children:(0,a.jsx)(p,{className:"h-4 w-4"})}),(0,a.jsx)("button",{onClick:()=>w(e.id),disabled:f===e.id,className:"text-red-600 hover:text-red-900 p-1 disabled:opacity-50",title:"Удалить",children:(0,a.jsx)(m.A,{className:"h-4 w-4"})})]})})]},e.id))})]})})}),(0,a.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Всего товаров"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:e.length})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Активных товаров"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:e.filter(e=>e.is_active).length})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Заканчивающихся товаров"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-red-600",children:e.filter(e=>e.stock_quantity<10).length})]})]})]})})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64173:(e,t,s)=>{Promise.resolve().then(s.bind(s,54771))},88233:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},96474:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},99919:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>d.a,__next_app__:()=>x,pages:()=>c,routeModule:()=>p,tree:()=>o});var a=s(65239),r=s(48088),i=s(88170),d=s.n(i),n=s(30893),l={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);s.d(t,l);let o={children:["",{children:["admin_dashboard",{children:["products",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,49049)),"C:\\Users\\HP\\Desktop\\work\\project\\app\\admin_dashboard\\products\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,32007)),"C:\\Users\\HP\\Desktop\\work\\project\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["C:\\Users\\HP\\Desktop\\work\\project\\app\\admin_dashboard\\products\\page.tsx"],x={require:s,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/admin_dashboard/products/page",pathname:"/admin_dashboard/products",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[7719,5282,474,1287],()=>s(99919));module.exports=a})();