(()=>{var e={};e.id=4622,e.ids=[4622],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},16023:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(62688).A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},16189:(e,s,t)=>{"use strict";var r=t(65773);t.o(r,"usePathname")&&t.d(s,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(s,{useSearchParams:function(){return r.useSearchParams}})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},28559:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(62688).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},39639:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>p});var r=t(60687),a=t(43210),n=t(16189),o=t(85814),i=t.n(o),l=t(28559),d=t(11860),c=t(16023),u=t(30474);let m={name:"",slug:"",description:"",short_description:"",price:"",original_price:"",category_id:"",stock_quantity:"",sku:"",meta_title:"",meta_description:"",is_featured:!1,tags:[]};function p(){let[e,s]=(0,a.useState)(m),[t,o]=(0,a.useState)([]),[p,x]=(0,a.useState)(!1),[h,g]=(0,a.useState)(null),[b,f]=(0,a.useState)(""),[y,j]=(0,a.useState)(""),[v,k]=(0,a.useState)({}),N=(0,n.useRouter)(),_=e=>{let{name:t,value:r,type:a}=e.target;s(s=>({...s,[t]:"checkbox"===a?e.target.checked:r}))},w=()=>{y.trim()&&!e.tags.includes(y.trim())&&(s(e=>({...e,tags:[...e.tags,y.trim()]})),j(""))},P=e=>{s(s=>({...s,tags:s.tags.filter(s=>s!==e)}))},C=()=>{let s={};return e.name.trim()||(s.name="Название обязательно"),e.description.trim()||(s.description="Описание обязательно"),(!e.price||0>=parseFloat(e.price))&&(s.price="Укажите корректную цену"),e.category_id||(s.category_id="Выберите категорию"),(!e.stock_quantity||0>parseInt(e.stock_quantity))&&(s.stock_quantity="Укажите количество на складе"),k(s),0===Object.keys(s).length},q=async s=>{if(s.preventDefault(),C()){x(!0);try{let s=localStorage.getItem("admin-token");if(!s)return void N.push("/admin/login");let t=new FormData;Object.entries(e).forEach(([e,s])=>{"tags"===e?t.append(e,JSON.stringify(s)):t.append(e,s.toString())}),h&&t.append("image",h);let r=await fetch("/api/admin/products",{method:"POST",headers:{Authorization:`Bearer ${s}`},body:t}),a=await r.json();r.ok?(alert("Товар успешно добавлен!"),N.push("/admin_dashboard/products")):alert(a.error||"Ошибка при добавлении товара")}catch(e){alert("Произошла ошибка при добавлении товара")}finally{x(!1)}}};return(0,r.jsx)("div",{className:"min-h-screen bg-gray-100",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)(i(),{href:"/admin_dashboard",className:"inline-flex items-center text-gray-600 hover:text-gray-900 mb-4",children:[(0,r.jsx)(l.A,{className:"h-5 w-5 mr-2"}),"Назад к панели управления"]}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Добавить новый товар"})]}),(0,r.jsxs)("form",{onSubmit:q,className:"space-y-8",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Основная информация"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Название товара *"}),(0,r.jsx)("input",{type:"text",name:"name",value:e.name,onChange:_,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 ${v.name?"border-red-500":"border-gray-300"}`,placeholder:"Набор воздушных шаров..."}),v.name&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:v.name})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL slug"}),(0,r.jsx)("input",{type:"text",name:"slug",value:e.slug,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500",placeholder:"nabor-vozdushnyh-sharov"})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Краткое описание"}),(0,r.jsx)("input",{type:"text",name:"short_description",value:e.short_description,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500",placeholder:"Краткое описание для превью..."})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Полное описание *"}),(0,r.jsx)("textarea",{name:"description",value:e.description,onChange:_,rows:4,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 ${v.description?"border-red-500":"border-gray-300"}`,placeholder:"Подробное описание товара..."}),v.description&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:v.description})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Цена и категория"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Цена *"}),(0,r.jsx)("input",{type:"number",name:"price",value:e.price,onChange:_,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 ${v.price?"border-red-500":"border-gray-300"}`,placeholder:"1500",min:"0",step:"0.01"}),v.price&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:v.price})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Старая цена"}),(0,r.jsx)("input",{type:"number",name:"original_price",value:e.original_price,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500",placeholder:"2000",min:"0",step:"0.01"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Категория *"}),(0,r.jsxs)("select",{name:"category_id",value:e.category_id,onChange:_,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 ${v.category_id?"border-red-500":"border-gray-300"}`,children:[(0,r.jsx)("option",{value:"",children:"Выберите категорию"}),t.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]}),v.category_id&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:v.category_id})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Количество на складе *"}),(0,r.jsx)("input",{type:"number",name:"stock_quantity",value:e.stock_quantity,onChange:_,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 ${v.stock_quantity?"border-red-500":"border-gray-300"}`,placeholder:"100",min:"0"}),v.stock_quantity&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:v.stock_quantity})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Артикул (SKU)"}),(0,r.jsx)("input",{type:"text",name:"sku",value:e.sku,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500",placeholder:"BAL-001"})]}),(0,r.jsx)("div",{children:(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",name:"is_featured",checked:e.is_featured,onChange:_,className:"mr-2"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Рекомендуемый товар"})]})})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Изображение товара"}),(0,r.jsx)("div",{className:"space-y-4",children:b?(0,r.jsxs)("div",{className:"relative inline-block",children:[(0,r.jsx)(u.default,{src:b,alt:"Preview",width:200,height:200,className:"rounded-lg object-cover"}),(0,r.jsx)("button",{type:"button",onClick:()=>{g(null),f("")},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",children:(0,r.jsx)(d.A,{className:"h-4 w-4"})})]}):(0,r.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[(0,r.jsx)(c.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,r.jsxs)("label",{className:"cursor-pointer",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Нажмите для загрузки изображения или перетащите файл сюда"}),(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{let s=e.target.files?.[0];if(s){g(s);let e=new FileReader;e.onloadend=()=>{f(e.result)},e.readAsDataURL(s)}},className:"hidden"})]})]})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Теги"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("input",{type:"text",value:y,onChange:e=>j(e.target.value),onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),w()),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500",placeholder:"Введите тег и нажмите Enter"}),(0,r.jsx)("button",{type:"button",onClick:w,className:"px-4 py-2 bg-pink-500 text-white rounded-lg hover:bg-pink-600",children:"Добавить"})]}),e.tags.length>0&&(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:e.tags.map(e=>(0,r.jsxs)("span",{className:"bg-pink-100 text-pink-800 px-3 py-1 rounded-full text-sm flex items-center gap-2",children:[e,(0,r.jsx)("button",{type:"button",onClick:()=>P(e),className:"hover:text-pink-600",children:(0,r.jsx)(d.A,{className:"h-3 w-3"})})]},e))})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"SEO настройки"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Meta Title"}),(0,r.jsx)("input",{type:"text",name:"meta_title",value:e.meta_title,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500",placeholder:"Заголовок для поисковиков"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Meta Description"}),(0,r.jsx)("textarea",{name:"meta_description",value:e.meta_description,onChange:_,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500",placeholder:"Описание для поисковиков (до 160 символов)"})]})]})]}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsx)("button",{type:"submit",disabled:p,className:"bg-pink-500 text-white px-6 py-3 rounded-lg hover:bg-pink-600 focus:outline-none focus:ring-2 focus:ring-pink-500 disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Сохранение...":"Сохранить товар"}),(0,r.jsx)(i(),{href:"/admin_dashboard",className:"bg-gray-500 text-white px-6 py-3 rounded-lg hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Отмена"})]})]})]})})}},44722:(e,s,t)=>{Promise.resolve().then(t.bind(t,39639))},59709:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\HP\\\\Desktop\\\\work\\\\project\\\\app\\\\admin_dashboard\\\\products\\\\add\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\HP\\Desktop\\work\\project\\app\\admin_dashboard\\products\\add\\page.tsx","default")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},81674:(e,s,t)=>{Promise.resolve().then(t.bind(t,59709))},91979:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>o.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d});var r=t(65239),a=t(48088),n=t(88170),o=t.n(n),i=t(30893),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);t.d(s,l);let d={children:["",{children:["admin_dashboard",{children:["products",{children:["add",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,59709)),"C:\\Users\\HP\\Desktop\\work\\project\\app\\admin_dashboard\\products\\add\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,32007)),"C:\\Users\\HP\\Desktop\\work\\project\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["C:\\Users\\HP\\Desktop\\work\\project\\app\\admin_dashboard\\products\\add\\page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin_dashboard/products/add/page",pathname:"/admin_dashboard/products/add",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[7719,5282,474,1287],()=>t(91979));module.exports=r})();