{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Desktop/work/project/app/products/%5Bid%5D/AddToCartButton.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { ShoppingCart, Plus, Minus } from 'lucide-react';\r\nimport { useCart } from '@/hooks/useCart';\r\n\r\ninterface Product {\r\n  id: number;\r\n  name: string;\r\n  price: number;\r\n  image: string;\r\n  inStock: boolean;\r\n}\r\n\r\ninterface Props {\r\n  product: Product;\r\n}\r\n\r\nexport default function AddToCartButton({ product }: Props) {\r\n  const [quantity, setQuantity] = useState(1);\r\n  const [isAdding, setIsAdding] = useState(false);\r\n  const { addItem } = useCart();\r\n\r\n  const handleAddToCart = async () => {\r\n    if (!product.inStock) return;\r\n\r\n    setIsAdding(true);\r\n    \r\n    try {\r\n      // Добавляем товар в корзину нужное количество раз\r\n      for (let i = 0; i < quantity; i++) {\r\n        addItem({\r\n          id: product.id,\r\n          name: product.name,\r\n          price: product.price,\r\n          image: product.image\r\n        });\r\n      }\r\n      \r\n      // Показываем уведомление об успешном добавлении\r\n      // В реальном приложении здесь был бы toast или notification\r\n      alert(`${product.name} добавлен в корзину!`);\r\n    } catch (error) {\r\n      console.error('Error adding to cart:', error);\r\n      alert('Произошла ошибка при добавлении товара в корзину');\r\n    } finally {\r\n      setIsAdding(false);\r\n    }\r\n  };\r\n\r\n  const incrementQuantity = () => {\r\n    setQuantity(prev => Math.min(prev + 1, 10)); // максимум 10 штук\r\n  };\r\n\r\n  const decrementQuantity = () => {\r\n    setQuantity(prev => Math.max(prev - 1, 1)); // минимум 1 штука\r\n  };\r\n\r\n  if (!product.inStock) {\r\n    return (\r\n      <button\r\n        disabled\r\n        className=\"w-full bg-gray-300 text-gray-500 py-4 px-6 rounded-lg font-semibold cursor-not-allowed flex items-center justify-center gap-2\"\r\n      >\r\n        <ShoppingCart className=\"h-5 w-5\" />\r\n        Нет в наличии\r\n      </button>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {/* Выбор количества */}\r\n      <div className=\"flex items-center gap-4\">\r\n        <span className=\"text-sm font-medium text-gray-700\">Количество:</span>\r\n        <div className=\"flex items-center border border-gray-300 rounded-lg\">\r\n          <button\r\n            onClick={decrementQuantity}\r\n            className=\"p-2 hover:bg-gray-100 transition-colors\"\r\n            disabled={quantity <= 1}\r\n          >\r\n            <Minus className=\"h-4 w-4\" />\r\n          </button>\r\n          <span className=\"px-4 py-2 min-w-[3rem] text-center\">\r\n            {quantity}\r\n          </span>\r\n          <button\r\n            onClick={incrementQuantity}\r\n            className=\"p-2 hover:bg-gray-100 transition-colors\"\r\n            disabled={quantity >= 10}\r\n          >\r\n            <Plus className=\"h-4 w-4\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Кнопка добавления в корзину */}\r\n      <button\r\n        onClick={handleAddToCart}\r\n        disabled={isAdding}\r\n        className=\"w-full bg-pink-500 text-white py-4 px-6 rounded-lg font-semibold hover:bg-pink-600 focus:outline-none focus:ring-2 focus:ring-pink-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2\"\r\n      >\r\n        <ShoppingCart className=\"h-5 w-5\" />\r\n        {isAdding ? 'Добавление...' : 'Добавить в корзину'}\r\n      </button>\r\n    </div>\r\n  );\r\n} "],"names":[],"mappings":";;;;AAEA;AACA;AAAA;AAAA;AACA;AAJA;;;;;AAkBe,SAAS,gBAAgB,EAAE,OAAO,EAAS;IACxD,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,EAAE,OAAO,EAAE,GAAG,CAAA,GAAA,iHAAA,CAAA,UAAO,AAAD;IAE1B,MAAM,kBAAkB;QACtB,IAAI,CAAC,QAAQ,OAAO,EAAE;QAEtB,YAAY;QAEZ,IAAI;YACF,kDAAkD;YAClD,IAAK,IAAI,IAAI,GAAG,IAAI,UAAU,IAAK;gBACjC,QAAQ;oBACN,IAAI,QAAQ,EAAE;oBACd,MAAM,QAAQ,IAAI;oBAClB,OAAO,QAAQ,KAAK;oBACpB,OAAO,QAAQ,KAAK;gBACtB;YACF;YAEA,gDAAgD;YAChD,4DAA4D;YAC5D,MAAM,GAAG,QAAQ,IAAI,CAAC,oBAAoB,CAAC;QAC7C,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,yBAAyB;YACvC,MAAM;QACR,SAAU;YACR,YAAY;QACd;IACF;IAEA,MAAM,oBAAoB;QACxB,YAAY,CAAA,OAAQ,KAAK,GAAG,CAAC,OAAO,GAAG,MAAM,mBAAmB;IAClE;IAEA,MAAM,oBAAoB;QACxB,YAAY,CAAA,OAAQ,KAAK,GAAG,CAAC,OAAO,GAAG,KAAK,kBAAkB;IAChE;IAEA,IAAI,CAAC,QAAQ,OAAO,EAAE;QACpB,qBACE,8OAAC;YACC,QAAQ;YACR,WAAU;;8BAEV,8OAAC,sNAAA,CAAA,eAAY;oBAAC,WAAU;;;;;;gBAAY;;;;;;;IAI1C;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAK,WAAU;kCAAoC;;;;;;kCACpD,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCACC,SAAS;gCACT,WAAU;gCACV,UAAU,YAAY;0CAEtB,cAAA,8OAAC,oMAAA,CAAA,QAAK;oCAAC,WAAU;;;;;;;;;;;0CAEnB,8OAAC;gCAAK,WAAU;0CACb;;;;;;0CAEH,8OAAC;gCACC,SAAS;gCACT,WAAU;gCACV,UAAU,YAAY;0CAEtB,cAAA,8OAAC,kMAAA,CAAA,OAAI;oCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;0BAMtB,8OAAC;gBACC,SAAS;gBACT,UAAU;gBACV,WAAU;;kCAEV,8OAAC,sNAAA,CAAA,eAAY;wBAAC,WAAU;;;;;;oBACvB,WAAW,kBAAkB;;;;;;;;;;;;;AAItC","debugId":null}},
    {"offset": {"line": 175, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Desktop/work/project/app/products/%5Bid%5D/ProductReviews.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { Star, User, ThumbsUp, MessageCircle } from 'lucide-react';\r\n\r\ninterface Review {\r\n  id: number;\r\n  userId: number;\r\n  userName: string;\r\n  rating: number;\r\n  comment: string;\r\n  date: string;\r\n  helpful: number;\r\n  isModerated: boolean;\r\n}\r\n\r\ninterface Props {\r\n  productId: number;\r\n}\r\n\r\nexport default function ProductReviews({ productId }: Props) {\r\n  const [reviews, setReviews] = useState<Review[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showAddReview, setShowAddReview] = useState(false);\r\n  const [newReview, setNewReview] = useState({\r\n    rating: 5,\r\n    comment: '',\r\n    userName: ''\r\n  });\r\n  const [submitting, setSubmitting] = useState(false);\r\n\r\n  // Мок данные отзывов\r\n  const mockReviews: Review[] = [\r\n    {\r\n      id: 1,\r\n      userId: 1,\r\n      userName: 'Анна К.',\r\n      rating: 5,\r\n      comment: 'Отличные воздушные шары! Качество превосходное, яркие цвета. Дети были в восторге на празднике!',\r\n      date: '2024-01-15',\r\n      helpful: 12,\r\n      isModerated: true\r\n    },\r\n    {\r\n      id: 2,\r\n      userId: 2,\r\n      userName: 'Михаил П.',\r\n      rating: 4,\r\n      comment: 'Хорошие шары, быстрая доставка. Один шар лопнул через день, но в целом качество нормальное.',\r\n      date: '2024-01-10',\r\n      helpful: 8,\r\n      isModerated: true\r\n    },\r\n    {\r\n      id: 3,\r\n      userId: 3,\r\n      userName: 'Елена С.',\r\n      rating: 5,\r\n      comment: 'Заказывала для свадьбы - все гости были в восторге! Шары держали форму весь день.',\r\n      date: '2024-01-05',\r\n      helpful: 15,\r\n      isModerated: true\r\n    }\r\n  ];\r\n\r\n  useEffect(() => {\r\n    fetchReviews();\r\n  }, [productId]);\r\n\r\n  const fetchReviews = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await fetch(`/api/products/${productId}/reviews`);\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setReviews(data.reviews || []);\r\n      } else {\r\n        // Используем мок данные если API недоступно\r\n        setReviews(mockReviews);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching reviews:', error);\r\n      // Используем мок данные в случае ошибки\r\n      setReviews(mockReviews);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSubmitReview = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!newReview.comment.trim() || !newReview.userName.trim()) return;\r\n\r\n    setSubmitting(true);\r\n    try {\r\n      const response = await fetch(`/api/products/${productId}/reviews`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          ...newReview,\r\n          productId\r\n        }),\r\n      });\r\n\r\n      if (response.ok) {\r\n        // Добавляем новый отзыв в состояние (он будет ожидать модерации)\r\n        const newReviewData: Review = {\r\n          id: Date.now(),\r\n          userId: 0,\r\n          userName: newReview.userName,\r\n          rating: newReview.rating,\r\n          comment: newReview.comment,\r\n          date: new Date().toISOString().split('T')[0],\r\n          helpful: 0,\r\n          isModerated: false\r\n        };\r\n        \r\n        setReviews(prev => [newReviewData, ...prev]);\r\n        setNewReview({ rating: 5, comment: '', userName: '' });\r\n        setShowAddReview(false);\r\n        alert('Спасибо! Ваш отзыв отправлен на модерацию.');\r\n      } else {\r\n        alert('Произошла ошибка при отправке отзыва');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error submitting review:', error);\r\n      alert('Произошла ошибка при отправке отзыва');\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const renderStars = (rating: number, size: 'sm' | 'lg' = 'sm') => {\r\n    const starSize = size === 'lg' ? 'h-6 w-6' : 'h-4 w-4';\r\n    return (\r\n      <div className=\"flex items-center gap-1\">\r\n        {[1, 2, 3, 4, 5].map((star) => (\r\n          <Star\r\n            key={star}\r\n            className={`${starSize} ${\r\n              star <= rating ? 'text-yellow-400 fill-current' : 'text-gray-300'\r\n            }`}\r\n          />\r\n        ))}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const averageRating = reviews.length > 0 \r\n    ? reviews.reduce((sum, review) => sum + review.rating, 0) / reviews.length \r\n    : 0;\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"space-y-4\">\r\n        <h3 className=\"text-xl font-semibold\">Отзывы</h3>\r\n        <div className=\"animate-pulse space-y-4\">\r\n          {[1, 2, 3].map((i) => (\r\n            <div key={i} className=\"bg-gray-100 h-24 rounded-lg\"></div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Заголовок и статистика */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h3 className=\"text-xl font-semibold\">Отзывы ({reviews.length})</h3>\r\n          {reviews.length > 0 && (\r\n            <div className=\"flex items-center gap-2 mt-1\">\r\n              {renderStars(Math.round(averageRating))}\r\n              <span className=\"text-sm text-gray-600\">\r\n                {averageRating.toFixed(1)} из 5\r\n              </span>\r\n            </div>\r\n          )}\r\n        </div>\r\n        <button\r\n          onClick={() => setShowAddReview(!showAddReview)}\r\n          className=\"bg-pink-500 text-white px-4 py-2 rounded-lg hover:bg-pink-600 transition-colors flex items-center gap-2\"\r\n        >\r\n          <MessageCircle className=\"h-4 w-4\" />\r\n          Оставить отзыв\r\n        </button>\r\n      </div>\r\n\r\n      {/* Форма добавления отзыва */}\r\n      {showAddReview && (\r\n        <form onSubmit={handleSubmitReview} className=\"bg-gray-50 p-6 rounded-lg space-y-4\">\r\n          <h4 className=\"font-semibold\">Добавить отзыв</h4>\r\n          \r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              Ваше имя\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              value={newReview.userName}\r\n              onChange={(e) => setNewReview(prev => ({ ...prev, userName: e.target.value }))}\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              Оценка\r\n            </label>\r\n            <div className=\"flex items-center gap-1\">\r\n              {[1, 2, 3, 4, 5].map((star) => (\r\n                <button\r\n                  key={star}\r\n                  type=\"button\"\r\n                  onClick={() => setNewReview(prev => ({ ...prev, rating: star }))}\r\n                  className=\"p-1\"\r\n                >\r\n                  <Star\r\n                    className={`h-6 w-6 ${\r\n                      star <= newReview.rating \r\n                        ? 'text-yellow-400 fill-current' \r\n                        : 'text-gray-300 hover:text-yellow-200'\r\n                    }`}\r\n                  />\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              Комментарий\r\n            </label>\r\n            <textarea\r\n              value={newReview.comment}\r\n              onChange={(e) => setNewReview(prev => ({ ...prev, comment: e.target.value }))}\r\n              rows={4}\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500\"\r\n              placeholder=\"Поделитесь своим мнением о товаре...\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"flex gap-2\">\r\n            <button\r\n              type=\"submit\"\r\n              disabled={submitting}\r\n              className=\"bg-pink-500 text-white px-4 py-2 rounded-lg hover:bg-pink-600 disabled:opacity-50 transition-colors\"\r\n            >\r\n              {submitting ? 'Отправка...' : 'Отправить отзыв'}\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => setShowAddReview(false)}\r\n              className=\"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition-colors\"\r\n            >\r\n              Отмена\r\n            </button>\r\n          </div>\r\n        </form>\r\n      )}\r\n\r\n      {/* Список отзывов */}\r\n      <div className=\"space-y-4\">\r\n        {reviews.length === 0 ? (\r\n          <p className=\"text-gray-500 text-center py-8\">\r\n            Пока нет отзывов. Будьте первым!\r\n          </p>\r\n        ) : (\r\n          reviews.map((review) => (\r\n            <div key={review.id} className=\"bg-white border border-gray-200 rounded-lg p-6\">\r\n              {!review.isModerated && (\r\n                <div className=\"bg-yellow-50 border border-yellow-200 text-yellow-800 px-3 py-1 rounded text-sm mb-3\">\r\n                  Отзыв ожидает модерации\r\n                </div>\r\n              )}\r\n              \r\n              <div className=\"flex items-start gap-4\">\r\n                <div className=\"flex-shrink-0\">\r\n                  <div className=\"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center\">\r\n                    <User className=\"h-5 w-5 text-gray-500\" />\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"flex-1\">\r\n                  <div className=\"flex items-center gap-2 mb-2\">\r\n                    <span className=\"font-medium\">{review.userName}</span>\r\n                    {renderStars(review.rating)}\r\n                    <span className=\"text-sm text-gray-500\">{review.date}</span>\r\n                  </div>\r\n                  \r\n                  <p className=\"text-gray-700 mb-3\">{review.comment}</p>\r\n                  \r\n                  <div className=\"flex items-center gap-4 text-sm text-gray-500\">\r\n                    <button className=\"flex items-center gap-1 hover:text-pink-600 transition-colors\">\r\n                      <ThumbsUp className=\"h-4 w-4\" />\r\n                      Полезно ({review.helpful})\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n} "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 734, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Desktop/work/project/app/products/%5Bid%5D/RelatedProducts.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport Link from 'next/link';\r\nimport Image from 'next/image';\r\nimport { Star, Heart } from 'lucide-react';\r\n\r\ninterface Product {\r\n  id: number;\r\n  name: string;\r\n  price: number;\r\n  image: string;\r\n  rating: number;\r\n  reviews: number;\r\n  discount?: number;\r\n}\r\n\r\ninterface Props {\r\n  productId: number;\r\n  categoryId?: number;\r\n}\r\n\r\nexport default function RelatedProducts({ productId, categoryId }: Props) {\r\n  const [products, setProducts] = useState<Product[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // Мок данные похожих товаров\r\n  const mockProducts: Product[] = [\r\n    {\r\n      id: 2,\r\n      name: 'Воздушные шары \"Сердце\" красные',\r\n      price: 299,\r\n      image: '/images/products/balloon.png',\r\n      rating: 4.8,\r\n      reviews: 24,\r\n      discount: 15\r\n    },\r\n    {\r\n      id: 3,\r\n      name: 'Фольгированные шары \"Звезда\"',\r\n      price: 450,\r\n      image: '/images/products/balloon.png',\r\n      rating: 4.9,\r\n      reviews: 18\r\n    },\r\n    {\r\n      id: 4,\r\n      name: 'Шары для моделирования ШДМ',\r\n      price: 199,\r\n      image: '/images/products/balloon.png',\r\n      rating: 4.7,\r\n      reviews: 31\r\n    },\r\n    {\r\n      id: 5,\r\n      name: 'Светящиеся LED шары',\r\n      price: 799,\r\n      image: '/images/products/balloon.png',\r\n      rating: 4.6,\r\n      reviews: 12,\r\n      discount: 20\r\n    },\r\n    {\r\n      id: 6,\r\n      name: 'Шары металлик золото',\r\n      price: 349,\r\n      image: '/images/products/balloon.png',\r\n      rating: 4.8,\r\n      reviews: 27\r\n    },\r\n    {\r\n      id: 7,\r\n      name: 'Конфетти шары прозрачные',\r\n      price: 599,\r\n      image: '/images/products/balloon.png',\r\n      rating: 4.9,\r\n      reviews: 15\r\n    }\r\n  ];\r\n\r\n  useEffect(() => {\r\n    fetchRelatedProducts();\r\n  }, [productId, categoryId]);\r\n\r\n  const fetchRelatedProducts = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await fetch(`/api/products/related?productId=${productId}&categoryId=${categoryId || ''}`);\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setProducts(data.products || []);\r\n      } else {\r\n        // Используем мок данные если API недоступно\r\n        const filteredProducts = mockProducts.filter(p => p.id !== productId);\r\n        setProducts(filteredProducts.slice(0, 4));\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching related products:', error);\r\n      // Используем мок данные в случае ошибки\r\n      const filteredProducts = mockProducts.filter(p => p.id !== productId);\r\n      setProducts(filteredProducts.slice(0, 4));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const renderStars = (rating: number) => {\r\n    return (\r\n      <div className=\"flex items-center gap-1\">\r\n        {[1, 2, 3, 4, 5].map((star) => (\r\n          <Star\r\n            key={star}\r\n            className={`h-4 w-4 ${\r\n              star <= rating ? 'text-yellow-400 fill-current' : 'text-gray-300'\r\n            }`}\r\n          />\r\n        ))}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"space-y-4\">\r\n        <h3 className=\"text-xl font-semibold\">Похожие товары</h3>\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n          {[1, 2, 3, 4].map((i) => (\r\n            <div key={i} className=\"animate-pulse\">\r\n              <div className=\"bg-gray-200 aspect-square rounded-lg mb-3\"></div>\r\n              <div className=\"space-y-2\">\r\n                <div className=\"bg-gray-200 h-4 rounded\"></div>\r\n                <div className=\"bg-gray-200 h-4 w-2/3 rounded\"></div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (products.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <h3 className=\"text-xl font-semibold\">Похожие товары</h3>\r\n      \r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n        {products.map((product) => (\r\n          <div key={product.id} className=\"group cursor-pointer\">\r\n            <Link href={`/products/${product.id}`}>\r\n              <div className=\"relative bg-gray-100 rounded-lg overflow-hidden aspect-square mb-3\">\r\n                {/* Скидка */}\r\n                {product.discount && (\r\n                  <div className=\"absolute top-2 left-2 bg-red-500 text-white px-2 py-1 rounded text-xs font-semibold z-10\">\r\n                    -{product.discount}%\r\n                  </div>\r\n                )}\r\n\r\n                {/* Кнопка избранного */}\r\n                <button\r\n                  className=\"absolute top-2 right-2 p-2 bg-white rounded-full shadow-md opacity-0 group-hover:opacity-100 transition-opacity z-10 hover:bg-pink-50\"\r\n                  onClick={(e) => {\r\n                    e.preventDefault();\r\n                    // Логика добавления в избранное\r\n                    console.log('Add to favorites:', product.id);\r\n                  }}\r\n                >\r\n                  <Heart className=\"h-4 w-4 text-gray-600 hover:text-pink-500\" />\r\n                </button>\r\n\r\n                {/* Изображение товара */}\r\n                <Image\r\n                  src={product.image}\r\n                  alt={product.name}\r\n                  fill\r\n                  className=\"object-cover group-hover:scale-105 transition-transform duration-300\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-1\">\r\n                {/* Название товара */}\r\n                <h4 className=\"font-medium text-gray-900 group-hover:text-pink-600 transition-colors line-clamp-2\">\r\n                  {product.name}\r\n                </h4>\r\n\r\n                {/* Рейтинг и отзывы */}\r\n                <div className=\"flex items-center gap-2\">\r\n                  {renderStars(product.rating)}\r\n                  <span className=\"text-sm text-gray-500\">\r\n                    ({product.reviews})\r\n                  </span>\r\n                </div>\r\n\r\n                {/* Цена */}\r\n                <div className=\"flex items-center gap-2\">\r\n                  {product.discount ? (\r\n                    <>\r\n                      <span className=\"text-lg font-semibold text-pink-600\">\r\n                        {Math.round(product.price * (1 - product.discount / 100))} ₽\r\n                      </span>\r\n                      <span className=\"text-sm text-gray-500 line-through\">\r\n                        {product.price} ₽\r\n                      </span>\r\n                    </>\r\n                  ) : (\r\n                    <span className=\"text-lg font-semibold text-gray-900\">\r\n                      {product.price} ₽\r\n                    </span>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </Link>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Кнопка \"Показать еще\" */}\r\n      <div className=\"text-center\">\r\n        <Link \r\n          href=\"/catalog\"\r\n          className=\"inline-flex items-center px-6 py-3 border border-pink-500 text-pink-500 rounded-lg hover:bg-pink-500 hover:text-white transition-colors\"\r\n        >\r\n          Посмотреть все товары\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n} "],"names":[],"mappings":"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","debugId":null}}]
}