{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 70, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Desktop/work/project/app/api/admin/reviews/pending/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\r\nimport jwt from 'jsonwebtoken';\r\n\r\n// Проверка авторизации админа\r\nfunction verifyAdminToken(request: NextRequest) {\r\n  const authorization = request.headers.get('authorization');\r\n  if (!authorization || !authorization.startsWith('Bearer ')) {\r\n    return null;\r\n  }\r\n\r\n  const token = authorization.replace('Bearer ', '');\r\n  \r\n  try {\r\n    const decoded = jwt.verify(token, process.env.JWT_SECRET || 'default-secret') as any;\r\n    if (decoded.role !== 'admin') {\r\n      return null;\r\n    }\r\n    return decoded;\r\n  } catch (error) {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport async function GET(request: NextRequest) {\r\n  try {\r\n    // Проверка авторизации\r\n    const adminUser = verifyAdminToken(request);\r\n    if (!adminUser) {\r\n      return NextResponse.json(\r\n        { success: false, error: 'Unauthorized' },\r\n        { status: 401 }\r\n      );\r\n    }\r\n\r\n    // Моковые данные отзывов для модерации\r\n    const pendingReviews = [\r\n      {\r\n        id: 1,\r\n        user_name: 'Анна Петрова',\r\n        product_name: 'Воздушные шары латексные \"Радуга\"',\r\n        rating: 5,\r\n        comment: 'Отличные шары! Качество превосходное, дети были в восторге. Обязательно закажем еще!',\r\n        created_at: '2024-01-20T10:30:00Z',\r\n        is_moderated: false\r\n      },\r\n      {\r\n        id: 2,\r\n        user_name: 'Михаил Иванов',\r\n        product_name: 'Фольгированные шары \"Звезда\"',\r\n        rating: 4,\r\n        comment: 'Хорошие шары, быстрая доставка. Один шар немного помялся, но в целом доволен покупкой.',\r\n        created_at: '2024-01-19T15:45:00Z',\r\n        is_moderated: false\r\n      },\r\n      {\r\n        id: 3,\r\n        user_name: 'Елена Смирнова',\r\n        product_name: 'Шары для моделирования ШДМ',\r\n        rating: 5,\r\n        comment: 'Заказывала для детского дня рождения - все прошло идеально! Шары хорошо держат форму.',\r\n        created_at: '2024-01-18T09:15:00Z',\r\n        is_moderated: false\r\n      }\r\n    ];\r\n\r\n    return NextResponse.json({\r\n      success: true,\r\n      data: pendingReviews\r\n    });\r\n\r\n  } catch (error) {\r\n    console.error('Error fetching pending reviews:', error);\r\n    return NextResponse.json(\r\n      { success: false, error: 'Failed to fetch reviews' },\r\n      { status: 500 }\r\n    );\r\n  }\r\n} "],"names":[],"mappings":";;;AAAA;AACA;;;AAEA,8BAA8B;AAC9B,SAAS,iBAAiB,OAAoB;IAC5C,MAAM,gBAAgB,QAAQ,OAAO,CAAC,GAAG,CAAC;IAC1C,IAAI,CAAC,iBAAiB,CAAC,cAAc,UAAU,CAAC,YAAY;QAC1D,OAAO;IACT;IAEA,MAAM,QAAQ,cAAc,OAAO,CAAC,WAAW;IAE/C,IAAI;QACF,MAAM,UAAU,iHAAA,CAAA,UAAG,CAAC,MAAM,CAAC,OAAO,QAAQ,GAAG,CAAC,UAAU,IAAI;QAC5D,IAAI,QAAQ,IAAI,KAAK,SAAS;YAC5B,OAAO;QACT;QACA,OAAO;IACT,EAAE,OAAO,OAAO;QACd,OAAO;IACT;AACF;AAEO,eAAe,IAAI,OAAoB;IAC5C,IAAI;QACF,uBAAuB;QACvB,MAAM,YAAY,iBAAiB;QACnC,IAAI,CAAC,WAAW;YACd,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;gBAAO,OAAO;YAAe,GACxC;gBAAE,QAAQ;YAAI;QAElB;QAEA,uCAAuC;QACvC,MAAM,iBAAiB;YACrB;gBACE,IAAI;gBACJ,WAAW;gBACX,cAAc;gBACd,QAAQ;gBACR,SAAS;gBACT,YAAY;gBACZ,cAAc;YAChB;YACA;gBACE,IAAI;gBACJ,WAAW;gBACX,cAAc;gBACd,QAAQ;gBACR,SAAS;gBACT,YAAY;gBACZ,cAAc;YAChB;YACA;gBACE,IAAI;gBACJ,WAAW;gBACX,cAAc;gBACd,QAAQ;gBACR,SAAS;gBACT,YAAY;gBACZ,cAAc;YAChB;SACD;QAED,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,MAAM;QACR;IAEF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,mCAAmC;QACjD,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;YAAE,SAAS;YAAO,OAAO;QAA0B,GACnD;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}